apt update

apt install slapd ldap-utils -y


During installation, you will be prompted for an Administrator password. This sets the password for the admin account of your LDAP directory.




Configuring slapd
-----------------

Please enter the password for the admin entry in your LDAP directory.

Administrator password:

Please enter the admin password for your LDAP directory again to verify that you have typed it correctly.

Confirm password:








✅ check openladap service
systemctl status slapd.service



# systemctl status slapd.service
● slapd.service - LSB: OpenLDAP standalone server (Lightweight Directory Access Protocol)
     Loaded: loaded (/etc/init.d/slapd; generated)
    Drop-In: /usr/lib/systemd/system/slapd.service.d
             └─slapd-remain-after-exit.conf
     Active: active (running) since Mon 2025-11-24 10:19:30 UTC; 1min 9s ago
       Docs: man:systemd-sysv-generator(8)
    Process: 2371 ExecStart=/etc/init.d/slapd start (code=exited, status=0/SUCCESS)
      Tasks: 3 (limit: 978)
     Memory: 5.2M (peak: 5.5M)
        CPU: 34ms
     CGroup: /system.slice/slapd.service
             └─2378 /usr/sbin/slapd -h "ldap:/// ldapi:///" -g openldap -u openldap -F /etc/ldap/slapd.d

Nov 24 10:19:29 test systemd[1]: Starting slapd.service - LSB: OpenLDAP standalone server (Lightweight Directory Acces>
Nov 24 10:19:30 test slapd[2371]:  * Starting OpenLDAP slapd
Nov 24 10:19:30 test slapd[2377]: @(#) $OpenLDAP: slapd 2.6.7+dfsg-1~exp1ubuntu8.2 (Dec  9 2024 02:50:18) $
                                          Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
Nov 24 10:19:30 test slapd[2378]: slapd starting
Nov 24 10:19:30 test slapd[2371]:    ...done.
Nov 24 10:19:30 test systemd[1]: Started slapd.service - LSB: OpenLDAP standalone server (Lightweight Directory Access>
#




slapd -V




# slapd -V
@(#) $OpenLDAP: slapd 2.6.7+dfsg-1~exp1ubuntu8.2 (Dec  9 2024 02:50:18) $
	Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>

#













# the default config file

/etc/default/slapd


ls -al /etc/default/slapd





ldapsearch -Y EXTERNAL -H ldapi://%2Fvar%2Frun%2Fslapd%2Fldapi -b olcDatabase={1}mdb,cn=config


ldapsearch -x -H ldap://127.0.0.1:389 -b "" -s base "(objectClass=*)"









✅ install successfully




✅

2. Initial Configuration (The Easy Way)
On Debian-based systems, you can trigger a guided setup that handles the heavy lifting of the cn=config setup for you.


sudo dpkg-reconfigure slapd



Follow these prompts:

Omit OpenLDAP server configuration? No.

DNS domain name: Enter your domain (e.g., office.example.com). This creates your Base DN (e.g., dc=office,dc=example,dc=com).

Organization name: Your company or project name.

Administrator password: Enter the admin password again.

Database backend: Select MDB (the modern standard).

Remove database when slapd is purged? No (usually).

Move old database? Yes.






3. Understanding the Hierarchy
LDAP stores data in a tree structure (the DIT). To manage it, you need to understand the components.

dn (Distinguished Name): The unique path to an entry (like a full file path).

dc (Domain Component): Parts of your domain (e.g., dc=example,dc=com).

ou (Organizational Unit): Like a folder (e.g., ou=Users).

cn (Common Name): The name of the specific object (e.g., cn=John Doe).




4. Adding Data (LDIF Files)
In the OLC era, you don't edit config files directly. Instead, you create .ldif files and "inject" them into the server.

Create a file called base.ldif:






Import the file:
Use the ldapadd command. You will need the admin password you created earlier.


ldapadd -x -D "cn=admin,dc=example,dc=com" -W -f base.ldif






5. Verify the Configuration

To see if your entries were added correctly, run a search:


ldapsearch -x -b "dc=example,dc=com" "(objectClass=*)"







✅

To create a user account in OpenLDAP, you need to define it in an LDIF (LDAP Data Interchange Format) file. This file tells the server which "Object Classes" to use and which attributes (like name, UID, and password) to assign.

1. Generate a Hashed Password
For security, you should never store passwords in plain text. Use the slappasswd utility to generate a hashed version:


slappasswd
Input: Your desired user password.

Output: Something like {SSHA}6jG+K0H... (Copy this string).


# slappasswd
New password:
Re-enter new password:
{SSHA}FlmpNy1U+3Es1+Zic6fysSsGCrQpI2pB
#







2. Create the LDIF File
Create a file named newuser.ldif. We will use the inetOrgPerson object class, which is the standard for people, and posixAccount if you want the user to be able to log in to Linux systems.





Key Attribute Breakdown:
dn: The "Distinguished Name"—the unique address for this user.

uid: The username (unique identifier).

uidNumber / gidNumber: These must be unique on your system (typically start above 10000 to avoid system conflicts).

homeDirectory: The path to the user's home folder.

userPassword: The hash you generated in Step 1.

3. Add the User to OpenLDAP
Run the following command to inject the user into your directory. Replace the -D path with your actual admin DN.

Bash
ldapadd -x -D "cn=admin,dc=example,dc=com" -W -f newuser.ldif
-x: Use simple authentication.

-D: The Bind DN (the admin account authorized to add users).

-W: Prompt for the admin password.

-f: The path to your LDIF file.

4. Verify the New User
To ensure the user was created correctly, search for them by their UID:

Bash
ldapsearch -x -b "dc=example,dc=com" "uid=jdoe"






