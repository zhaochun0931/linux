openssl req -x509 -new -nodes -keyout myca.key -out myca.crt -subj "/C=US/ST=State/L=City/O=MyCA/OU=IT/CN=MyCA"
openssl req -new -nodes -keyout ldap.key -out ldap.csr -subj "/C=US/ST=State/L=City/O=Organization/OU=IT/CN=myldap.com"
openssl x509 -req -in ldap.csr -CA myca.crt -CAkey myca.key -CAcreateserial -out ldap.crt -days 365



├── ldap.crt
├── ldap.csr
├── ldap.key
├── myca.crt
└── myca.key



cp myca.crt /usr/local/share/ca-certificates/
cp myca.key /etc/ssl/private/
cp ldap.crt /etc/ldap/
cp ldap.key /etc/ldap/



update-ca-certificates




chgrp openldap /etc/ldap/ldap.key
chmod 0640 /etc/ldap/ldap.key

ldapmodify -Y EXTERNAL -H ldapi:/// -f certinfo.ldif



# ldapmodify -Y EXTERNAL -H ldapi:/// -f certinfo.ldif
SASL/EXTERNAL authentication started
SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth
SASL SSF: 0
modifying entry "cn=config"

#



/etc/default/slapd


systemctl restart slapd





/usr/local/libexec/slapd -h "ldap:/// ldaps:///"

