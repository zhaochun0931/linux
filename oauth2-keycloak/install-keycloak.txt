docker run -p 8080:8080 -e KC_BOOTSTRAP_ADMIN_USERNAME=admin -e KC_BOOTSTRAP_ADMIN_PASSWORD=admin quay.io/keycloak/keycloak:latest start-dev






http://localhost:8080

admin/admin




1. Create a realm: test
2. Create a user: myuser/mypassword



3. Create a client: myclient
Client type: OpenID Connect type

Clients -> Create client



http://localhost:8080/realms/test/account



4. Create the client scope:

Client scopes -> Create client scope

rabbitmq.tag:management
rabbitmq.tag:administrator
rabbitmq.read:*/*
rabbitmq.write:*/*
rabbitmq.configure:*/*



5. Add these client scopes to client(myclient)

6. Create the roles

rabbitmq.tag:management
rabbitmq.tag:administrator







#
curl -X POST 'http://localhost:8080/realms/{realm-name}/protocol/openid-connect/token' \
-d 'client_id={client-id}' \
-d 'client_secret={client-secret}' \
-d 'grant_type=client_credentials'




or



echo -n "my-client:my-secret" | base64

curl --request POST --url http://localhost:8080/realms/test/protocol/openid-connect/token \
--header 'Authorization: Basic {base64_credential}' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--data 'grant_type=client_credentials'





https://jwt.io/








keytool -genkeypair -storepass password -storetype PKCS12 -keyalg RSA -keysize 2048 -dname "CN=server" -alias server -ext "SAN:c=DNS:localhost,IP:127.0.0.1" -keystore server.keystore

#
docker build -t mykeycloak .
docker run -p 8080:8080 -p 8443:8443 -e KC_BOOTSTRAP_ADMIN_USERNAME=admin -e KC_BOOTSTRAP_ADMIN_PASSWORD=admin mykeycloak start-dev --hostname=10.211.55.22





https://10.211.55.22:8443/realms/test/.well-known/openid-configuration


