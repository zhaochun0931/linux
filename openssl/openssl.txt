The OpenSSL configuration file is located at /etc/ssl/openssl.cnf and is used both by the library itself and the command-line tools included in the package.

/etc/ssl/openssl.cnf



openssl version

openssl version -a





# pwd
/usr/lib/ssl
#
# ls -al
total 12
drwxr-xr-x  3 root root 4096 Dec  2 03:28 .
drwxr-xr-x 82 root root 4096 Jan 15 06:28 ..
lrwxrwxrwx  1 root root   34 Sep 18 11:12 cert.pem -> /etc/ssl/certs/ca-certificates.crt
lrwxrwxrwx  1 root root   14 Aug 20  2024 certs -> /etc/ssl/certs
drwxr-xr-x  2 root root 4096 Dec  2 03:28 misc
lrwxrwxrwx  1 root root   20 Sep 18 11:12 openssl.cnf -> /etc/ssl/openssl.cnf
lrwxrwxrwx  1 root root   16 Aug 20  2024 private -> /etc/ssl/private
#




✅ How OpenSSL finds the config file

If you specify -config <file> → uses that file


else, OpenSSL uses the compiled default:

OPENSSLDIR/openssl.cnf






3️⃣ What’s inside the default OpenSSL config file

Typical sections:

[ ca ]
default_ca = CA_default

[ CA_default ]
dir               = /etc/ssl
certs             = $dir/certs
crl_dir           = $dir/crl
database          = $dir/index.txt
new_certs_dir     = $dir/newcerts
certificate       = $dir/cacert.pem
private_key       = $dir/private/cakey.pem
default_md        = sha256
policy            = policy_match


Common extension sections:

[ v3_ca ]
basicConstraints = CA:TRUE
keyUsage = keyCertSign, cRLSign

[ v3_req ]
basicConstraints = CA:FALSE
keyUsage = digitalSignature, keyEncipherment
subjectAltName = @alt_names


[ ca ] → CA defaults

[ v3_ca ] → CA certificate extensions

[ v3_req ] → server/leaf certificate extensions

[ req ] → CSR generation defaults








✅
What v3_ca usually means (IMPORTANT)

Typical server.cnf snippet:

[ v3_ca ]
basicConstraints = CA:TRUE
keyUsage = keyCertSign, cRLSign
subjectAltName = @alt_names


⚠️ This makes the certificate a CA certificate, not a normal TLS server cert.

Is this good for HTTPS? ⚠️
❌ Usually NO

A proper TLS server cert should be:

basicConstraints = CA:FALSE
keyUsage = digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth


Using v3_ca:

Browsers may reject it

Some TLS stacks fail

Security issue (server acting as CA)





Correct version for a self-signed server cert
openssl x509 -req -days 365 \
  -in server.csr \
  -signkey server.key \
  -out server.crt \
  -extensions v3_req \
  -extfile server.cnf


Where:

[ v3_req ]
basicConstraints = CA:FALSE
keyUsage = digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth
subjectAltName = @alt_names














✅ What basicConstraints means

The Basic Constraints extension tells a certificate:

Whether it is allowed to act as a Certificate Authority (CA)


2️⃣ basicConstraints = CA:TRUE

Meaning

This certificate can issue other certificates.

Used for:

Root CAs

Intermediate CAs


Key Usage (often combined)

keyCertSign

cRLSign




3️⃣ basicConstraints = CA:FALSE

Meaning

This is a leaf / end-entity certificate

Cannot issue other certificates



Usually used for:

HTTPS server certs

Client certificates

Email certificates



Key Usage (often combined)

digitalSignature

keyEncipherment

serverAuth or clientAuth in extendedKeyUsage





Root CA (CA:TRUE)
│
├─ Intermediate CA (CA:TRUE)
│   └─ Server cert (CA:FALSE)
│
└─ Another Intermediate (CA:TRUE)
    └─ Client cert (CA:FALSE)
