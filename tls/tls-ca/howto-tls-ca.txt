âœ… generate CA private key and cert in a single command

openssl req -x509 -new -nodes -keyout myca.key -out myca.crt -subj "/C=US/ST=State/L=City/O=MyCA/OU=IT/CN=myca.com"

myca.crt
myca.key




âœ… Verify CA certificate integrity

openssl x509 -in myca.crt -text -noout




âœ… generate server.key and server.csr 

openssl req -new -nodes -keyout myserver.key -out myserver.csr -subj "/C=US/ST=State/L=City/O=Organization/OU=IT/CN=myserver.com"

myserver.csr
myserver.key





âœ… sign the server.key with custom CA

openssl x509 -req -in myserver.csr -CA myca.crt -CAkey myca.key -CAcreateserial -out myserver.crt -days 365





âœ…

openssl verify -CAfile myca.crt myserver.crt





âœ… Show certificate information

openssl x509 -in myserver.crt -text -noout







âœ… Check whether a private key matches a certificate
Get modulus of cert:
openssl x509 -noout -modulus -in myserver.crt | openssl md5

Get modulus of key:
openssl rsa -noout -modulus -in myserver.key | openssl md5



If the MD5 hashes are identical â†’ they match.





$
$ openssl x509 -noout -modulus -in myserver.crt | openssl md5
MD5(stdin)= 572c9556065390c1074dcd0cf666082a
$
$
$ openssl rsa -noout -modulus -in myserver.key | openssl md5
MD5(stdin)= 572c9556065390c1074dcd0cf666082a
$
$













âœ… 5. Start TLS server using OpenSSL
Terminal 1:

openssl s_server \
  -cert myserver.crt \
  -key myserver.key \
  -CAfile myca.crt \
  -accept 8443 \
  -verify 1


Meaning:

-cert: server certificate

-key: server private key

-CAfile: CA trusted by the server

-verify 1: require client to present a cert (optional)






ðŸ”¥ If you only want server-side TLS (no client cert):

openssl s_server -cert myserver.crt -key myserver.key -accept 8443





âœ… 6. Open another terminal and test using OpenSSL client
Terminal 2:

openssl s_client \
  -connect localhost:8443 \
  -CAfile myca.crt


You should see in the output:

Verify return code: 0 (ok)




Now you can type text and the server will echo it.
