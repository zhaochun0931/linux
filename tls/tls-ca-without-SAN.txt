-subj "/C=US/ST=State/L=City/O=Organization/OU=Unit/CN=example.com"



# ca
openssl genrsa -out ca.key
openssl req -new -out ca.csr -key ca.key -subj "/CN=myca"
openssl x509 -req -in ca.csr -signkey ca.key -out ca.crt









# server
openssl genrsa -out server.key
openssl req -new -out server.csr -key server.key -subj "/CN=servername"
openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt












# client
openssl genrsa -out client.key
openssl req -new -out client.csr -key client.key -subj "/CN=myclient.com"
openssl x509 -req -in client.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out client.crt








# verify 
openssl s_server -CAfile ca.crt  -cert server.crt -key server.key
openssl s_client -CAfile ca.crt


# verify the server and the client
openssl s_server -CAfile ca.crt -cert server.crt -key server.key
openssl s_client -CAfile ca.crt -cert client.crt -key client.key



or configure the nginx with ssl

change the /etc/hosts

1.1.1.1 myserver.com


curl --cacert ca-cert.pem --cert client-cert.pem --key client-key.pem https://myserver.com:8443
curl --cacert ca-cert.pem  https://myserver.com:8443
