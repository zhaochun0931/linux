gcc -fPIC -c mylib.c -o mylib.o
gcc -shared -o libmylib.so mylib.o




Explanation:

-fPIC: Makes the code relocatable (required for shared libraries)

-shared: Creates a .so shared object

Output: libmylib.so





gcc main.c -L. -lmylib -o main
./main



export LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH
./main
